<# File: operators.falak
   Verifies that the implementation of all the operators
   meet the specified requirements.
   (C) 2021 Ariel Ortiz, ITESM CEM.
#>

var fails;
var asserts;

assert(value1, value2, message) {
    inc asserts;
    if (value1 != value2) {
        inc fails;
        prints("Assertion failure: ");
        prints(message);
        println();
    }
}

# By default a function returns 0.
some_fun() {
}

# Always returns true
true_fun() {
    return true;
}

# Always returns false
false_fun() {
    return false;
}

# Should never be called
never_called() {
    assert(false, true, "error in short circuit operator");
}

main() {

    fails = 0;
    asserts = 0;

    assert(0, false_fun() && never_called(), "error in logical AND");

    

    printi(fails);
    prints(" failure(s) found in ");
    printi(asserts);
    prints(" assertion(s).\n");
}
